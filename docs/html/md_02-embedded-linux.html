<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Linux Driver Development Manual: Embedded Linux</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Linux Driver Development Manual
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Comprehensive guide to Linux kernel and device driver development</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Embedded Linux </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md54"></a>
Overview</h1>
<p>Embedded Linux refers to the use of Linux operating system in embedded systems - dedicated computer systems designed for specific functions within larger systems. This chapter covers building and customizing Linux for embedded devices.</p>
<h1><a class="anchor" id="autotoc_md55"></a>
Characteristics of Embedded Systems</h1>
<ul>
<li><b>Resource Constrained</b>: Limited CPU, memory, storage</li>
<li><b>Real-time Requirements</b>: Deterministic response times</li>
<li><b>Power Efficiency</b>: Battery-powered devices</li>
<li><b>Reliability</b>: Long-term operation without intervention</li>
<li><b>Cost Sensitive</b>: Optimized hardware costs</li>
<li><b>Application Specific</b>: Dedicated functionality</li>
</ul>
<h1><a class="anchor" id="autotoc_md56"></a>
Embedded Linux Architecture</h1>
<div class="fragment"><div class="line">+----------------------------------+</div>
<div class="line">|     Application Layer            |</div>
<div class="line">|  (User space applications)       |</div>
<div class="line">+----------------------------------+</div>
<div class="line">|     System Libraries             |</div>
<div class="line">|  (glibc, uClibc, musl)          |</div>
<div class="line">+----------------------------------+</div>
<div class="line">|     Linux Kernel                 |</div>
<div class="line">|  (Drivers, Subsystems)          |</div>
<div class="line">+----------------------------------+</div>
<div class="line">|     Bootloader                   |</div>
<div class="line">|  (U-Boot, GRUB)                 |</div>
<div class="line">+----------------------------------+</div>
<div class="line">|     Hardware                     |</div>
<div class="line">+----------------------------------+</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md57"></a>
Build Systems</h1>
<h2><a class="anchor" id="autotoc_md58"></a>
Buildroot</h2>
<p>Lightweight build system for embedded Linux.</p>
<h3><a class="anchor" id="autotoc_md59"></a>
Installation</h3>
<div class="fragment"><div class="line">git clone https://github.com/buildroot/buildroot.git</div>
<div class="line">cd buildroot</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md60"></a>
Configuration</h3>
<div class="fragment"><div class="line">make menuconfig</div>
</div><!-- fragment --><p>Key configurations:</p><ul>
<li>Target architecture</li>
<li>Toolchain options</li>
<li>Kernel version</li>
<li>Root filesystem type</li>
<li>Package selection</li>
</ul>
<h3><a class="anchor" id="autotoc_md61"></a>
Build</h3>
<div class="fragment"><div class="line">make -j$(nproc)</div>
</div><!-- fragment --><p>Output in <code>output/images/</code>:</p><ul>
<li><code>rootfs.tar</code>: Root filesystem</li>
<li><code>zImage</code>: Kernel image</li>
<li><code>*.dtb</code>: Device tree blobs</li>
</ul>
<h2><a class="anchor" id="autotoc_md62"></a>
Yocto Project</h2>
<p>Industrial-grade build system for custom Linux distributions.</p>
<h3><a class="anchor" id="autotoc_md63"></a>
Installation</h3>
<div class="fragment"><div class="line">git clone git://git.yoctoproject.org/poky</div>
<div class="line">cd poky</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md64"></a>
Setup Environment</h3>
<div class="fragment"><div class="line">source oe-init-build-env</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md65"></a>
Configuration</h3>
<p>Edit <code>conf/local.conf</code>: </p><div class="fragment"><div class="line">MACHINE = &quot;qemuarm&quot;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md66"></a>
Build</h3>
<div class="fragment"><div class="line">bitbake core-image-minimal</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md67"></a>
OpenEmbedded</h2>
<p>Metadata and build framework used by Yocto.</p>
<h1><a class="anchor" id="autotoc_md68"></a>
Cross-Compilation Toolchain</h1>
<h2><a class="anchor" id="autotoc_md69"></a>
Components</h2>
<ul>
<li><b>Cross-compiler</b>: gcc for target architecture</li>
<li><b>Cross-linker</b>: ld for target</li>
<li><b>C library</b>: glibc, uClibc, musl</li>
<li><b>Binary utilities</b>: objdump, strip, etc.</li>
</ul>
<h2><a class="anchor" id="autotoc_md70"></a>
Installing Toolchain</h2>
<h3><a class="anchor" id="autotoc_md71"></a>
Using Package Manager</h3>
<div class="fragment"><div class="line"># For ARM</div>
<div class="line">sudo apt-get install gcc-arm-linux-gnueabihf g++-arm-linux-gnueabihf</div>
<div class="line"> </div>
<div class="line"># For ARM64</div>
<div class="line">sudo apt-get install gcc-aarch64-linux-gnu g++-aarch64-linux-gnu</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md72"></a>
Using Crosstool-NG</h3>
<div class="fragment"><div class="line">git clone https://github.com/crosstool-ng/crosstool-ng</div>
<div class="line">cd crosstool-ng</div>
<div class="line">./bootstrap</div>
<div class="line">./configure --prefix=/opt/crosstool-ng</div>
<div class="line">make</div>
<div class="line">sudo make install</div>
<div class="line"> </div>
<div class="line"># Configure and build toolchain</div>
<div class="line">ct-ng menuconfig</div>
<div class="line">ct-ng build</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md73"></a>
Using Toolchain</h2>
<div class="fragment"><div class="line">export ARCH=arm</div>
<div class="line">export CROSS_COMPILE=arm-linux-gnueabihf-</div>
<div class="line">export PATH=/path/to/toolchain/bin:$PATH</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md74"></a>
Bootloaders</h1>
<h2><a class="anchor" id="autotoc_md75"></a>
U-Boot (Universal Bootloader)</h2>
<p>Most popular bootloader for embedded Linux.</p>
<h3><a class="anchor" id="autotoc_md76"></a>
Download and Build</h3>
<div class="fragment"><div class="line">git clone https://github.com/u-boot/u-boot.git</div>
<div class="line">cd u-boot</div>
<div class="line"> </div>
<div class="line"># Configure for your board</div>
<div class="line">make &lt;board_name&gt;_defconfig</div>
<div class="line"> </div>
<div class="line"># Build</div>
<div class="line">make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- -j$(nproc)</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md77"></a>
U-Boot Commands</h3>
<div class="fragment"><div class="line"># Environment variables</div>
<div class="line">printenv</div>
<div class="line">setenv</div>
<div class="line">saveenv</div>
<div class="line"> </div>
<div class="line"># Memory operations</div>
<div class="line">md    # Memory display</div>
<div class="line">mm    # Memory modify</div>
<div class="line">cp    # Copy memory</div>
<div class="line"> </div>
<div class="line"># Boot commands</div>
<div class="line">bootm  # Boot from memory</div>
<div class="line">bootz  # Boot zImage</div>
<div class="line">bootelf # Boot ELF image</div>
<div class="line"> </div>
<div class="line"># Storage</div>
<div class="line">fatload  # Load from FAT filesystem</div>
<div class="line">ext4load # Load from ext4</div>
<div class="line">mmc      # MMC/SD commands</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md78"></a>
Boot Process</h3>
<div class="fragment"><div class="line">1. Power-on/Reset</div>
<div class="line">2. ROM bootloader (SoC internal)</div>
<div class="line">3. SPL (Secondary Program Loader)</div>
<div class="line">4. U-Boot proper</div>
<div class="line">5. Load kernel and device tree</div>
<div class="line">6. Boot Linux kernel</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md79"></a>
Barebox</h2>
<p>Alternative bootloader with shell-like interface.</p>
<h1><a class="anchor" id="autotoc_md80"></a>
Device Tree</h1>
<p>Hardware description format for embedded systems.</p>
<h2><a class="anchor" id="autotoc_md81"></a>
Device Tree Structure</h2>
<div class="fragment"><div class="line">/dts-v1/;</div>
<div class="line"> </div>
<div class="line">/ {</div>
<div class="line">    model = &quot;My Embedded Board&quot;;</div>
<div class="line">    compatible = &quot;vendor,board&quot;;</div>
<div class="line">    </div>
<div class="line">    cpus {</div>
<div class="line">        #address-cells = &lt;1&gt;;</div>
<div class="line">        #size-cells = &lt;0&gt;;</div>
<div class="line">        </div>
<div class="line">        cpu@0 {</div>
<div class="line">            device_type = &quot;cpu&quot;;</div>
<div class="line">            compatible = &quot;arm,cortex-a9&quot;;</div>
<div class="line">            reg = &lt;0&gt;;</div>
<div class="line">        };</div>
<div class="line">    };</div>
<div class="line">    </div>
<div class="line">    memory@80000000 {</div>
<div class="line">        device_type = &quot;memory&quot;;</div>
<div class="line">        reg = &lt;0x80000000 0x20000000&gt;; /* 512MB */</div>
<div class="line">    };</div>
<div class="line">    </div>
<div class="line">    uart0: serial@10000000 {</div>
<div class="line">        compatible = &quot;vendor,uart&quot;;</div>
<div class="line">        reg = &lt;0x10000000 0x1000&gt;;</div>
<div class="line">        interrupts = &lt;0 1 4&gt;;</div>
<div class="line">    };</div>
<div class="line">    </div>
<div class="line">    i2c0: i2c@20000000 {</div>
<div class="line">        compatible = &quot;vendor,i2c&quot;;</div>
<div class="line">        reg = &lt;0x20000000 0x1000&gt;;</div>
<div class="line">        #address-cells = &lt;1&gt;;</div>
<div class="line">        #size-cells = &lt;0&gt;;</div>
<div class="line">        </div>
<div class="line">        eeprom@50 {</div>
<div class="line">            compatible = &quot;atmel,24c02&quot;;</div>
<div class="line">            reg = &lt;0x50&gt;;</div>
<div class="line">        };</div>
<div class="line">    };</div>
<div class="line">};</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md82"></a>
Compiling Device Tree</h2>
<div class="fragment"><div class="line"># Compile .dts to .dtb</div>
<div class="line">dtc -I dts -O dtb -o board.dtb board.dts</div>
<div class="line"> </div>
<div class="line"># Decompile .dtb to .dts</div>
<div class="line">dtc -I dtb -O dts -o board.dts board.dtb</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md83"></a>
Device Tree Overlays</h2>
<div class="fragment"><div class="line">/dts-v1/;</div>
<div class="line">/plugin/;</div>
<div class="line"> </div>
<div class="line">/ {</div>
<div class="line">    fragment@0 {</div>
<div class="line">        target = &lt;&amp;i2c0&gt;;</div>
<div class="line">        __overlay__ {</div>
<div class="line">            sensor@48 {</div>
<div class="line">                compatible = &quot;ti,tmp102&quot;;</div>
<div class="line">                reg = &lt;0x48&gt;;</div>
<div class="line">            };</div>
<div class="line">        };</div>
<div class="line">    };</div>
<div class="line">};</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md84"></a>
Root Filesystem</h1>
<h2><a class="anchor" id="autotoc_md85"></a>
Minimal Root Filesystem Structure</h2>
<div class="fragment"><div class="line">/</div>
<div class="line">├── bin/        # Essential binaries</div>
<div class="line">├── sbin/       # System binaries</div>
<div class="line">├── etc/        # Configuration files</div>
<div class="line">├── dev/        # Device files</div>
<div class="line">├── proc/       # Process information (virtual)</div>
<div class="line">├── sys/        # System information (virtual)</div>
<div class="line">├── tmp/        # Temporary files</div>
<div class="line">├── usr/        # User programs</div>
<div class="line">│   ├── bin/</div>
<div class="line">│   ├── lib/</div>
<div class="line">│   └── sbin/</div>
<div class="line">├── var/        # Variable data</div>
<div class="line">└── lib/        # Shared libraries</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md86"></a>
Creating Minimal Rootfs</h2>
<h3><a class="anchor" id="autotoc_md87"></a>
Using BusyBox</h3>
<div class="fragment"><div class="line"># Download and configure</div>
<div class="line">wget https://busybox.net/downloads/busybox-1.36.0.tar.bz2</div>
<div class="line">tar xf busybox-1.36.0.tar.bz2</div>
<div class="line">cd busybox-1.36.0</div>
<div class="line"> </div>
<div class="line"># Configure</div>
<div class="line">make menuconfig</div>
<div class="line"># Enable: Build static binary</div>
<div class="line"> </div>
<div class="line"># Build</div>
<div class="line">make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- -j$(nproc)</div>
<div class="line">make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- install</div>
<div class="line"> </div>
<div class="line"># Create rootfs structure</div>
<div class="line">mkdir -p rootfs</div>
<div class="line">cd rootfs</div>
<div class="line">mkdir -p bin sbin etc dev proc sys tmp usr/bin usr/sbin var lib</div>
<div class="line"> </div>
<div class="line"># Copy BusyBox</div>
<div class="line">cp -a ../busybox-1.36.0/_install/* .</div>
<div class="line"> </div>
<div class="line"># Create device nodes</div>
<div class="line">sudo mknod dev/console c 5 1</div>
<div class="line">sudo mknod dev/null c 1 3</div>
<div class="line"> </div>
<div class="line"># Create init script</div>
<div class="line">cat &gt; init &lt;&lt; &#39;EOF&#39;</div>
<div class="line">#!/bin/sh</div>
<div class="line">mount -t proc none /proc</div>
<div class="line">mount -t sysfs none /sys</div>
<div class="line">mount -t devtmpfs none /dev</div>
<div class="line">exec /bin/sh</div>
<div class="line">EOF</div>
<div class="line">chmod +x init</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md88"></a>
Init Systems</h2>
<h3><a class="anchor" id="autotoc_md89"></a>
Simple init</h3>
<div class="fragment"><div class="line">#!/bin/sh</div>
<div class="line">mount -t proc proc /proc</div>
<div class="line">mount -t sysfs sysfs /sys</div>
<div class="line">mount -t devtmpfs devtmpfs /dev</div>
<div class="line">exec /sbin/init</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md90"></a>
BusyBox init</h3>
<p>Uses <code>/etc/inittab</code>: </p><div class="fragment"><div class="line">::sysinit:/etc/init.d/rcS</div>
<div class="line">::respawn:/sbin/getty 115200 ttyS0</div>
<div class="line">::shutdown:/bin/umount -a -r</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md91"></a>
systemd</h3>
<p>Full-featured init system (larger footprint).</p>
<h1><a class="anchor" id="autotoc_md92"></a>
Kernel Configuration for Embedded</h1>
<h2><a class="anchor" id="autotoc_md93"></a>
Essential Options</h2>
<div class="fragment"><div class="line">CONFIG_EMBEDDED=y</div>
<div class="line">CONFIG_EXPERT=y</div>
<div class="line"> </div>
<div class="line"># Reduce kernel size</div>
<div class="line">CONFIG_MODULES=y</div>
<div class="line">CONFIG_KALLSYMS=n</div>
<div class="line">CONFIG_DEBUG_KERNEL=n</div>
<div class="line">CONFIG_PRINTK=y</div>
<div class="line"> </div>
<div class="line"># Embedded features</div>
<div class="line">CONFIG_EMBEDDED_RAMDISK=y</div>
<div class="line">CONFIG_BLK_DEV_INITRD=y</div>
<div class="line"> </div>
<div class="line"># Device tree</div>
<div class="line">CONFIG_OF=y</div>
<div class="line">CONFIG_OF_FLATTREE=y</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md94"></a>
Size Optimization</h2>
<div class="fragment"><div class="line"># Strip kernel modules</div>
<div class="line">INSTALL_MOD_STRIP=1 make modules_install</div>
<div class="line"> </div>
<div class="line"># Compress with XZ</div>
<div class="line">CONFIG_KERNEL_XZ=y</div>
<div class="line"> </div>
<div class="line"># Remove debug symbols</div>
<div class="line">CONFIG_DEBUG_INFO=n</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md95"></a>
Flash Memory</h1>
<h2><a class="anchor" id="autotoc_md96"></a>
Types</h2>
<ul>
<li><b>NOR Flash</b>: Random access, execute-in-place</li>
<li><b>NAND Flash</b>: Block access, higher density</li>
<li><b>eMMC</b>: Managed NAND with controller</li>
<li><b>SD/MMC</b>: Removable storage</li>
</ul>
<h2><a class="anchor" id="autotoc_md97"></a>
MTD (Memory Technology Devices)</h2>
<p>Subsystem for flash memory.</p>
<h3><a class="anchor" id="autotoc_md98"></a>
MTD Partitions</h3>
<div class="fragment"><div class="line"># View MTD partitions</div>
<div class="line">cat /proc/mtd</div>
<div class="line"> </div>
<div class="line"># Read from MTD</div>
<div class="line">dd if=/dev/mtd0 of=backup.img</div>
<div class="line"> </div>
<div class="line"># Write to MTD</div>
<div class="line">flash_erase /dev/mtd0 0 0</div>
<div class="line">nandwrite -p /dev/mtd0 image.bin</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md99"></a>
MTD in Device Tree</h3>
<div class="fragment"><div class="line">flash@0 {</div>
<div class="line">    compatible = &quot;jedec,spi-nor&quot;;</div>
<div class="line">    reg = &lt;0&gt;;</div>
<div class="line">    </div>
<div class="line">    partitions {</div>
<div class="line">        compatible = &quot;fixed-partitions&quot;;</div>
<div class="line">        #address-cells = &lt;1&gt;;</div>
<div class="line">        #size-cells = &lt;1&gt;;</div>
<div class="line">        </div>
<div class="line">        partition@0 {</div>
<div class="line">            label = &quot;bootloader&quot;;</div>
<div class="line">            reg = &lt;0x0 0x40000&gt;;</div>
<div class="line">            read-only;</div>
<div class="line">        };</div>
<div class="line">        </div>
<div class="line">        partition@40000 {</div>
<div class="line">            label = &quot;kernel&quot;;</div>
<div class="line">            reg = &lt;0x40000 0x400000&gt;;</div>
<div class="line">        };</div>
<div class="line">        </div>
<div class="line">        partition@440000 {</div>
<div class="line">            label = &quot;rootfs&quot;;</div>
<div class="line">            reg = &lt;0x440000 0x0&gt;;</div>
<div class="line">        };</div>
<div class="line">    };</div>
<div class="line">};</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md100"></a>
Real-Time Linux</h1>
<h2><a class="anchor" id="autotoc_md101"></a>
PREEMPT_RT Patch</h2>
<p>Provides hard real-time capabilities.</p>
<h3><a class="anchor" id="autotoc_md102"></a>
Apply RT Patch</h3>
<div class="fragment"><div class="line"># Download kernel and RT patch</div>
<div class="line">wget https://cdn.kernel.org/pub/linux/kernel/v6.x/linux-6.1.tar.xz</div>
<div class="line">wget https://cdn.kernel.org/pub/linux/kernel/projects/rt/6.1/patch-6.1-rt.patch.xz</div>
<div class="line"> </div>
<div class="line"># Extract and patch</div>
<div class="line">tar xf linux-6.1.tar.xz</div>
<div class="line">cd linux-6.1</div>
<div class="line">xzcat ../patch-6.1-rt.patch.xz | patch -p1</div>
<div class="line"> </div>
<div class="line"># Configure</div>
<div class="line">make menuconfig</div>
<div class="line"># Enable: Fully Preemptible Kernel (RT)</div>
<div class="line"> </div>
<div class="line"># Build</div>
<div class="line">make -j$(nproc)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md103"></a>
RT Configuration</h2>
<div class="fragment"><div class="line">CONFIG_PREEMPT_RT=y</div>
<div class="line">CONFIG_HIGH_RES_TIMERS=y</div>
<div class="line">CONFIG_NO_HZ_FULL=y</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md104"></a>
Power Management</h1>
<h2><a class="anchor" id="autotoc_md105"></a>
CPU Frequency Scaling</h2>
<div class="fragment"><div class="line"># View available governors</div>
<div class="line">cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_available_governors</div>
<div class="line"> </div>
<div class="line"># Set governor</div>
<div class="line">echo &quot;powersave&quot; &gt; /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md106"></a>
Suspend/Resume</h2>
<div class="fragment"><div class="line"># Suspend to RAM</div>
<div class="line">echo mem &gt; /sys/power/state</div>
<div class="line"> </div>
<div class="line"># Suspend to disk (hibernate)</div>
<div class="line">echo disk &gt; /sys/power/state</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md107"></a>
Device Tree Power Domains</h2>
<div class="fragment"><div class="line">power: power-controller {</div>
<div class="line">    compatible = &quot;vendor,power&quot;;</div>
<div class="line">    #power-domain-cells = &lt;1&gt;;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">device@0 {</div>
<div class="line">    power-domains = &lt;&amp;power 0&gt;;</div>
<div class="line">};</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md108"></a>
Debugging Embedded Systems</h1>
<h2><a class="anchor" id="autotoc_md109"></a>
Serial Console</h2>
<div class="fragment"><div class="line"># Kernel command line</div>
<div class="line">console=ttyS0,115200</div>
<div class="line"> </div>
<div class="line"># Connect via minicom</div>
<div class="line">minicom -D /dev/ttyUSB0 -b 115200</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md110"></a>
JTAG Debugging</h2>
<p>Using OpenOCD: </p><div class="fragment"><div class="line"># Start OpenOCD</div>
<div class="line">openocd -f interface/jlink.cfg -f target/stm32f4x.cfg</div>
<div class="line"> </div>
<div class="line"># Connect GDB</div>
<div class="line">arm-none-eabi-gdb vmlinux</div>
<div class="line">(gdb) target remote localhost:3333</div>
<div class="line">(gdb) load</div>
<div class="line">(gdb) continue</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md111"></a>
Early Printk</h2>
<div class="fragment"><div class="line">CONFIG_EARLY_PRINTK=y</div>
<div class="line"># Kernel command line: earlyprintk</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md112"></a>
Common Embedded Platforms</h1>
<h2><a class="anchor" id="autotoc_md113"></a>
Raspberry Pi</h2>
<ul>
<li>ARM Cortex-A series</li>
<li>Broadcom SoC</li>
<li>GPIO, SPI, I2C, UART</li>
</ul>
<h2><a class="anchor" id="autotoc_md114"></a>
BeagleBone</h2>
<ul>
<li>ARM Cortex-A8</li>
<li>TI AM335x SoC</li>
<li>PRU (Programmable Real-time Unit)</li>
</ul>
<h2><a class="anchor" id="autotoc_md115"></a>
i.MX Series</h2>
<ul>
<li>NXP ARM processors</li>
<li>Industrial applications</li>
<li>Rich peripheral set</li>
</ul>
<h1><a class="anchor" id="autotoc_md116"></a>
Best Practices</h1>
<ol type="1">
<li><b>Minimize footprint</b>: Remove unnecessary features</li>
<li><b>Optimize boot time</b>: Parallel initialization, reduce services</li>
<li><b>Secure boot</b>: Verify bootloader and kernel integrity</li>
<li><b>Watchdog</b>: Automatic recovery from hangs</li>
<li><b>OTA updates</b>: Over-the-air firmware updates</li>
<li><b>Logging</b>: Remote logging for debugging</li>
<li><b>Testing</b>: Extensive testing on target hardware</li>
</ol>
<h1><a class="anchor" id="autotoc_md117"></a>
Next Steps</h1>
<p>Proceed to <a class="el" href="md_03-kernel-module-programming.html">Linux Kernel Module Programming</a> to learn how to develop loadable kernel modules. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Feb 13 2026 16:02:32 for Linux Driver Development Manual by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
